# 1C# (OneCSharp)
1C# - это платформа для разработки серверных приложений, доступных через web.

1C# умеет работать с базами данных платформы 1С:Предприятие 7-ой и 8-ой версий напрямую.
Возможно также создание своих или работа с уже существующими базами данных "не 1С".

1C# состоит из трёх основных подсистем:

**1. Метаданные.**

Метаданные используются для моделирования прикладных объектов и их структур хранения данных.
Для работы с метаданными используется конфигуратор 1C# аналогичный конфигуратору 1С.

**2. Дизайнер запросов.**

Визуальный конструктор запросов аналогичный Microsoft SQL Server Management Studio. Этот дизайнер обеспечивает визуальное редактирование запроса в терминах объектов метаданных 1С, а не названий таблиц СУБД. Результатом работы дизайнера является построение синтаксического дерева запроса, которое можно сохранить в дереве метаданных 1C#. Запрос, как объект метаданных, может быть вызван через web сервер 1C# для выполнения и получения результата.

1C# умеет обращаться к данным из разных источников в одном запросе. Например, можно создать запрос, который одновременно получает данные из 1С 7.7 + 1С 8.3 + база данных "не 1С". Такой запрос создаётся в терминах метаданных 1С 8-ой версии.

**3. Web сервер.**

Web сервер 1C# - это .NET Core middleware (внешняя компонента для web сервера).
Непосредственно в качестве web сервера используется Kestrel.
Web сервер 1C# обслуживает клиентские запросы к созданным в конфигураторе 1C# запросам данных.
Полученный результат запроса сериализуется и отдайтся клиенту в формате JSON.

# Установка

Потребуется установка .NET Framework 4.7.2 + .NET Core 2.2

Актуальный билд проекта находится в папке **install** данного репозитория:

* utilities - обработки для выгрузки метаданных 1С в формате XML для загрузки в 1C#
* web-server - сервер 1C#, доступный по протоколу http
  - run-server.bat - запуск сервера 1C#
  - show-server-settings.bat - просмотр и редактирование настроек сервера 1C# в notepad
    - appSettings\ServerURL - адрес и порт сервера
    - connectionStrings\Zhichkin.Metadata - строка подключения к служебной базе данных 1C#
* wpf-ui - конфигуратор 1C#
  - run-wpf-ui.bat - запуск конфигуратора 1C#
  - show-wpf-ui-settings.bat - просмотр и редактирование настроек конфигуратора 1C# в notepad
    - connectionStrings\Zhichkin.Metadata - строка подключения к служебной базе данных 1C#

Достаточно просто скопировать соотвествующие каталоги по месту установки.

Перед этим необходимо создать базу данных на Microsoft SQL Server для хранения метаданных. Подробности по установке базы данных 1C# находятся в папке **doc**.

# Краткое описание идеи проекта на YouTube

<a href="https://youtu.be/mxLNecqwZ4E" target="_blank"><img src="https://img.youtube.com/vi/mxLNecqwZ4E/0.jpg" 
alt="ALT-OneCSharp in 10 minutes" width="240" height="180" border="10" /></a>

# Передача парметров web сервису 1C#

Передача параметров web функции 1C#, созданной при помощи конфигуратора платформы, выполняется в виде JSON объекта следующего вида:
```json
{
   "Булево" : true,
   "Строка" : "Тест",
   "ЦелоеЧисло" : 123,
   "ДробноеЧисло" : 123.45,
   "Дата" : "2019-08-01T19:15:00",
   "Неопределено" : null
}
```

# Контакты

dima_zhichkin@mail.ru
